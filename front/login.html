<!DOCTYPE html>
<html>
<head>
<title>login</title>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body style="min-height:100vh;width: 100vw;" class="p-3">
    <div class="alert alert-danger mt-5" role="alert" id="alert" style="display: none;width: 100vw;">
       Invalid login details
      </div>
      <div class="d-flex justify-content-center align-items-center flex-column" style=" min-height:100vh;width: 100%;" >


    <form action="http://127.0.0.1:3000/login" method="post" id="idForm" name="form1">
        <div class="form-group">
        <label for="exampleInputEmail1">User Name</label>
        <input type="name" name="username" class="form-control" id="username" aria-describedby="nameHelp" placeholder="Enter name" value="">
        </div>   
       
        
        <div class="form-group">
        <label for="exampleInputEmail1">Password</label>
        <input type="password" name="password" class="form-control" id="password" aria-describedby="emailHelp" placeholder="*********" value="">
        </div>
        <input type="submit" class="btn btn-primary" value="Login">
        <a href="./register.html" class="btn btn-success ml-2">Register</a>
      </form>  </div> 
<script>
    $("#idForm").submit(function(e) {

e.preventDefault(); // avoid to execute the actual submit of the form.

var form = $(this);
var actionUrl = form.attr('action');

$.ajax({
    type: "POST",
    url: actionUrl,
    data: form.serialize(), // serializes the form's elements.
    success: function(data)
    {
        if(data.code==200){
            sessionStorage.setItem("username", data.name);  

window.location.replace("./chatroom.html");
        }
        else{
            $('#alert').show();
        }
   
    }
});

});
</script>

</body>
</html>